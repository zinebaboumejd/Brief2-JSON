<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="../src/textAnimation.css">
  <title>json to graph</title>
</head>

<body class="bg-black h-screen w-screen">

  <div class="text-white">
    <div class="flex justify-between bg-slate-50 bg-opacity-10">
      <img class="w-14 h-14 m-2 ml-4" src="../src/images/shape-red-header-x2.png" alt="simplon logo" />
      <div class="dropdown_list p-2">
        <button class="flex dropdown_button gap-2 bg-white text-black m-2 mr-6 p-3 rounded-lg" onclick="dropMenu()">
          <img class="w-4 h-4 mt-1" src="../src/images/settings.png" alt="" />
          <p class="font-bold">Settings</p>
        </button>
        <div id="courses_id"
          class="courses list-none shadow-lg shadow-black bg-white text-black absolute z-10 -mt-2 rounded-md -ml-2 pt-1 pb-2 p-7">
          <div class="flex gap-2 pb-2 hover:bg-green-200 rounded-md p-2">
            <img class="w-6 h-6" src="../src/images/user.png" alt="user icon" />
            <li class="mb-1">
              <a href="">Profile</a>
            </li>
          </div>
          <div class="flex gap-2 pb-2 hover:bg-red-200 rounded-md p-2">
            <img class="w-6 h-6" src="../src/images/logout.png" alt="logout icon" />
            <a href="./">
              <li class="">Logout</li>
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="flex justify-center items-center w-full">
    <label for="dropzone-file"
      class="flex flex-col justify-center items-center w-full h-64 bg-gray-50 rounded-lg border-2 border-gray-300 border-dashed cursor-pointer dark:hover:bg-bray-800 dark:bg-gray-800 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-900">
      <div class="flex flex-col justify-center items-center pt-5 pb-6">
        <svg aria-hidden="true" class="mb-3 w-10 h-10 text-gray-400" fill="none" stroke="currentColor"
          viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
        </svg>
        <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
          <span class="font-semibold">Click to upload</span>
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          SVG
        </p>
      </div>
      <div class="bg-white">
        <input id="file" type="file" class="dark:hover:bg-gray-900 dark:bg-gray-800
         text-gray-800 hover:text-gray-900 text-sm 
          file:mr-5 file:py-2 file:px-6
          file:rounded-full file:border-0
          file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700
          hover:file:cursor-pointer hover:file:bg-amber-50
          hover:file:text-amber-700" accept=".json" />
      </div>
    </label>
  </div>

  <div id="root" class="flex text-center justify-center mt-6 text-white bg-slate-600">
<!-- where the graph shows up -->
  </div>

  <div class="p-5">
    <h1 class="text-white font-bold text-xl mb-3">
      JSON Graph Visualizer
    </h1>
    <div>
      <p class="text-white mb-1">This JSON Graph Visualizer helps you to Chart JSON data in Graph and helps to drill
        down the
        json data.</p>
    </div>
    <div>
      <p class="text-white text-lg font-semibold mb-1">What can you do with JSON Graph Visualizer?</p>
    </div>
    <div class="text-white">
      <li>It helps to visualize your JSON data and create Graph.</li>
      <li>This tool allows loading the JSON URL to visualize in Graph mode. Use your JSON REST URL to visualize. Click
        on the Load URL button, Enter URL and Submit.</li>
      <li>Users can also visualize JSON in graph by uploading the JSON file.</li>
      <li class="mb-1">JSON Visualizer works well on Windows, MAC, Linux, Chrome, Firefox, Edge, and Safari.</li>
      <p>Know more about JSON.</p>
    </div>
  </div>


  <script>
    const uploadBtn = document.getElementById("file");
    // get the json file

    uploadBtn.addEventListener("change", (e) => {
      Swal.fire({
        title: 'JSON file choosed successfuly',
        showClass: {
          popup: 'animate__animated animate__fadeInDown'
        },
        hideClass: {
          popup: 'animate__animated animate__fadeOutUp'
        }
      })
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.readAsText(file);
      reader.onload = function () {
        const data = JSON.parse(reader.result);
        console.log(data);
        displayJson(data);

      };
    });

    let level = -1;

    const root = document.getElementById("root");
    function displayJson(data) {

      const json = JSON.stringify(data, undefined, 4);
      const parent = document.getElementById("root");
      // parent.innerHTML = json;

      TreeNode(data, parent);

    }
    const TreeNode = (data, parent) => {
      level++
      Object.keys(data).forEach((e) => {
        const div = document.createElement("div");
        const child = document.createElement("input");
        child.setAttribute("style", `margin-left: ${level * 20}px; margin-top: 20px; background-color: transparent; color: white;`);
        child.setAttribute("disabled", "");
        child.value = typeof data[e] === "object" ? e : data[e];
        div.appendChild(child);
        parent.appendChild(div);
        if (typeof data[e] === "object") TreeNode(data[e], div);
      });
      level--;
    };


    function dropMenu() {
      var courses = document.getElementById("courses_id");

      if (courses.style.display == "block") {
        courses.style.display = "none";
      } else {
        courses.style.display = "block";
      }
    }
    window.onclick = function (event) {
      if (!event.target.matches(".dropdown_button")) {
        document.getElementById("courses_id").style.display = "none";
      }
    };
  </script>
</body>

</html>